<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Cabbage Planter Control</title>
<script src="https://cdn.jsdelivr.net/npm/roslib/build/roslib.min.js"></script>
</head>

<body>

<h2>Cabbage Planter Robot</h2>

<button onclick="setMode('manual')">MANUAL</button>
<button onclick="setMode('auto')">AUTO</button>
<button onclick="emergencyStop()">EMERGENCY STOP</button>

<h3>Camera</h3>
<img src="http://localhost:8080/stream?topic=/camera/image_raw" width="640"/>

<script>

var ros = new ROSLIB.Ros({
  url : 'ws://localhost:9090'
});

ros.on('connection', function() {
  console.log('Connected to rosbridge');
});

var modeTopic = new ROSLIB.Topic({
  ros : ros,
  name : '/mode',
  messageType : 'std_msgs/String'
});

var stopTopic = new ROSLIB.Topic({
  ros : ros,
  name : '/cmd_linear',
  messageType : 'std_msgs/Int16'
});

function setMode(m){
  var msg = new ROSLIB.Message({ data : m });
  modeTopic.publish(msg);
}

function emergencyStop(){
  var msg = new ROSLIB.Message({ data : 0 });
  stopTopic.publish(msg);
}

</script>

</body>
</html>
